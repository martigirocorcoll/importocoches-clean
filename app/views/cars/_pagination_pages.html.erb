<%# PAGINATION %>
<div class="pagination-wrapper">
  <% unless session[:api_counter].nil? %>
    <% if session[:api_counter]<5 || user_signed_in? %>

        <% if @num_pages > 2 %>
        <% if @actual_page == 1 %>
          <b><%= link_to 1, car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %></b>
        <% else %>
          <%= link_to "#{t('pagination.anterior')}", car_page_path(number_results:@number_results, page: @num_prev, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
          <%= link_to 1, car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %>
        <% end %>

        <%= "..." if @actual_page > 3 %>
        <% if @actual_page == 1 %>
          <% @num_range_beginning.each do |num| %>
            <%= link_to num, car_page_path(number_results:@number_results, page: num, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %>
          <% end %>
          ...
        <% elsif @actual_page < @num_pages %>
          <%= link_to @num_prev, car_page_path(number_results:@number_results, page: @num_prev, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination" if @num_prev != 1 %>
          <b><%= link_to @actual_page, car_page_path(number_results:@number_results, page: @actual_page, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination"  %></b>
          <%= link_to @num_next, car_page_path(number_results:@number_results, page: @num_next, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination"  %>
          <%= "..." if @actual_page < @num_pages - 1 %>
        <% else %>
          <%= "..." if @actual_page < @num_pages - 1%>
          <% @num_range.each do |num| %>
            <%= link_to num, car_page_path(number_results:@number_results, page: num, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination" %>
          <% end %>
        <% end %>

        <%  unless @actual_page == @num_pages - 1  %>
          <% if @actual_page == @num_pages %>
            <b><%= link_to @num_pages, car_page_path(number_results:@number_results, page: @num_pages, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination"%></b>

          <% else %>
            <%= link_to @num_pages, car_page_path(number_results:@number_results, page: @num_pages, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination"%>
            <%= link_to "#{t('pagination.siguiente')}", car_page_path(number_results:@number_results, page: @num_next, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
          <% end %>
        <% end %>

        <%  if @actual_page == @num_pages - 1  %>
            <%= link_to "#{t('pagination.siguiente')}", car_page_path(number_results:@number_results, page: @num_next, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
        <% end %>
      <% else %>
        <%if @actual_page == 1%>
          <b><%= link_to 1, car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %></b>
          <%= link_to 2, car_page_path(number_results:@number_results, page: 2, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination"  %>
          <%= link_to "#{t('pagination.siguiente')}", car_page_path(number_results:@number_results, page: 2, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
        <%else%>
          <%= link_to "#{t('pagination.anterior')}", car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
          <%= link_to 1, car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %>
          <b><%= link_to 2, car_page_path(number_results:@number_results, page: 2, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination" %></b>
        <% end %>
      <% end %>


    <% else %>
      <%= link_to "<button class='home-button'>#{t('pages.home.login')}</button>".html_safe, new_user_registration_path %>
    <% end %>
  <% else %>
    <% if @num_pages > 2 %>
      <% if @actual_page == 1 %>
        <b><%= link_to 1, car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %></b>
      <% else %>
        <%= link_to "#{t('pagination.anterior')}", car_page_path(number_results:@number_results, page: @num_prev, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
        <%= link_to 1, car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %>
      <% end %>

      <%= "..." if @actual_page > 3 %>
      <% if @actual_page == 1 %>
        <% @num_range_beginning.each do |num| %>
          <%= link_to num, car_page_path(number_results:@number_results, page: num, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %>
        <% end %>
        ...
      <% elsif @actual_page < @num_pages %>
        <%= link_to @num_prev, car_page_path(number_results:@number_results, page: @num_prev, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination" if @num_prev != 1 %>
        <b><%= link_to @actual_page, car_page_path(number_results:@number_results, page: @actual_page, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination"  %></b>
        <%= link_to @num_next, car_page_path(number_results:@number_results, page: @num_next, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination"  %>
        <%= "..." if @actual_page < @num_pages - 1 %>
      <% else %>
        <%= "..." if @actual_page < @num_pages - 1%>
        <% @num_range.each do |num| %>
          <%= link_to num, car_page_path(number_results:@number_results, page: num, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination" %>
        <% end %>
      <% end %>

      <%  unless @actual_page == @num_pages - 1  %>
        <% if @actual_page == @num_pages %>
          <b><%= link_to @num_pages, car_page_path(number_results:@number_results, page: @num_pages, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination"%></b>

        <% else %>
          <%= link_to @num_pages, car_page_path(number_results:@number_results, page: @num_pages, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination"%>
          <%= link_to "#{t('pagination.siguiente')}", car_page_path(number_results:@number_results, page: @num_next, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
        <% end %>
      <% end %>

      <%  if @actual_page == @num_pages - 1  %>
          <%= link_to "#{t('pagination.siguiente')}", car_page_path(number_results:@number_results, page: @num_next, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
      <% end %>
    <% else %>
      <%if @actual_page == 1%>
        <b><%= link_to 1, car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %></b>
        <%= link_to 2, car_page_path(number_results:@number_results, page: 2, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination"  %>
        <%= link_to "#{t('pagination.siguiente')}", car_page_path(number_results:@number_results, page: 2, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
      <%else%>
        <%= link_to "#{t('pagination.anterior')}", car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination-next"  %>
        <%= link_to 1, car_page_path(number_results:@number_results, page: 1, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}), class:"btn-pagination" %>
        <b><%= link_to 2, car_page_path(number_results:@number_results, page: 2, endpoint: @first_endpoint, filters: {make: params["filters"]["make"], model: params["filters"]["model"], mileage_max: params["filters"]["mileage_max"], first_registration_date: params["filters"]["first_registration_date"], potencia: params["filters"]["potencia"], fuel: params["filters"]["fuel"], price_max: params["filters"]["price_max"], transmision: params["filters"]["transmision"], model_description: params["filters"]["model_description"], fourwheeldrive: params["filters"]["fourwheeldrive"]}),class:"btn-pagination" %></b>
      <% end %>
    <% end %>
  <% end %>
</div>
