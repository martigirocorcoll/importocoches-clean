<div class="dashboard-header" style="margin-bottom: 30px;">
  <h1 style="color: #2c3e50; font-size: 28px; margin-bottom: 10px;">
    <i class="fa-solid fa-file-contract"></i> Generar Contrato de Reserva
  </h1>
  <p style="color: #7f8c8d;">Complete los datos para generar un contrato de reserva de vehículo</p>
</div>

<div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
  <div class="row">
    <div class="col-12">
      <%= simple_form_for :contract_data, url: "/es/contract_pdf.pdf", method: "GET", html: { id: "contract_form" } do |f| %>
        
        <h4 class="mb-3" style="color: #34495e; border-bottom: 2px solid #3498db; padding-bottom: 10px;">
          <i class="fa-solid fa-car"></i> Datos del Vehículo
        </h4>
        
        <div class="row">
          <div class="col-md-6">
            <%= f.input :car_id, label: "ID del Coche (Mobile.de)", input_html: { 
              placeholder: "Ej: 430111792",
              value: params[:car_id] || "" 
            } %>
          </div>
          <div class="col-md-6">
            <%= f.input :marca_model, label: "Marca y Modelo", required: true, input_html: { 
              placeholder: "Ej: BMW X5",
              value: params[:marca_model] || ""
            } %>
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-4">
            <%= f.input :km, label: "Kilómetros", required: true, input_html: { 
              placeholder: "Ej: 32699",
              value: params[:km] || ""
            } %>
          </div>
          <div class="col-md-4">
            <%= f.input :primera_matriculacion, label: "1ª Matriculación", required: true, input_html: { 
              placeholder: "Ej: Mar.-24",
              value: params[:primera_matriculacion] || ""
            } %>
          </div>
          <div class="col-md-4">
            <%= f.input :chassis, label: "Número de Chasis", required: true, input_html: { placeholder: "VIN del vehículo" } %>
          </div>
        </div>
        
        <%= f.input :descripcion_traducida, label: "Descripción del Vehículo (Traducida)", as: :text, input_html: { rows: 3, placeholder: "Descripción en español del vehículo..." } %>
        
        <h4 class="mb-3 mt-4" style="color: #34495e; border-bottom: 2px solid #27ae60; padding-bottom: 10px;">
          <i class="fa-solid fa-euro-sign"></i> Datos Económicos
        </h4>
        
        <div class="row">
          <div class="col-md-6">
            <%= f.input :venta_total, label: "Precio de Venta (€)", required: true, input_html: { 
              placeholder: "20287", 
              step: 0.01,
              value: params[:venta_total] || ""
            } %>
          </div>
          <div class="col-md-6">
            <%= f.input :deposito, label: "Importe Depósito (€)", required: true, input_html: { value: 3000, step: 0.01 } %>
          </div>
        </div>
        
        <h4 class="mb-3 mt-4" style="color: #34495e; border-bottom: 2px solid #e74c3c; padding-bottom: 10px;">
          <i class="fa-solid fa-user"></i> Datos del Cliente
        </h4>
        
        <div class="alert alert-info" style="background-color: #d1ecf1; border-color: #bee5eb;">
          <i class="fa-solid fa-info-circle"></i> <small>Si es una empresa, rellene los campos de Empresa y NRT. Si es particular, déjelos vacíos.</small>
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <%= f.input :empresa, label: "Nombre de Empresa", required: false, input_html: { placeholder: "Dejar vacío si es particular" } %>
          </div>
          <div class="col-md-6">
            <%= f.input :nrt, label: "NRT (Empresa)", required: false, input_html: { placeholder: "Ej: L-720526-P" } %>
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <%= f.input :nombre, label: "Nombre del Cliente/Administrador", required: true, input_html: { placeholder: "Nombre completo" } %>
          </div>
          <div class="col-md-6">
            <%= f.input :nia, label: "NIA/Documento Identidad", required: true, input_html: { placeholder: "Ej: 266697L" } %>
          </div>
        </div>
        
        <%= f.input :domicilio, label: "Domicilio", required: true, input_html: { placeholder: "Dirección completa" } %>
        
        <h4 class="mb-3 mt-4" style="color: #34495e; border-bottom: 2px solid #f39c12; padding-bottom: 10px;">
          <i class="fa-solid fa-comment"></i> Comentarios Adicionales
        </h4>
        
        <div class="alert alert-info" style="background-color: #fff3cd; border-color: #ffeaa7;">
          <i class="fa-solid fa-info-circle"></i> <small>Campo opcional. Añada aquí cualquier cláusula especial o comentario que deba aparecer en el contrato.</small>
        </div>
        
        <%= f.input :comentarios, label: "Comentarios Adicionales", as: :text, required: false, input_html: { 
          rows: 4, 
          placeholder: "Escriba aquí comentarios adicionales, cláusulas especiales o condiciones específicas para este contrato..." 
        } %>
        
        <%= f.hidden_field :lang, value: 'es', id: 'contract_lang' %>
        
        <div style="margin-top: 40px; padding-top: 30px; border-top: 2px solid #ecf0f1;">
          <h5 style="text-align: center; color: #7f8c8d; margin-bottom: 20px;">
            <i class="fa-solid fa-language"></i> Seleccione el idioma del contrato
          </h5>
          
          <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
            <button type="submit" 
                    class="btn btn-primary btn-lg" 
                    style="background-color: #27ae60; border: none; padding: 15px 40px; font-size: 18px;" 
                    onclick="document.getElementById('contract_lang').value='es';"
                    formtarget="_blank">
              <i class="fa-solid fa-file-pdf"></i> Generar Contrato en Español
            </button>
            
            <button type="submit" 
                    class="btn btn-primary btn-lg" 
                    style="background-color: #3498db; border: none; padding: 15px 40px; font-size: 18px;" 
                    onclick="document.getElementById('contract_lang').value='en'; document.getElementById('contract_form').action='/es/contract_pdf_en.pdf';"
                    formtarget="_blank">
              <i class="fa-solid fa-file-pdf"></i> Generate Contract in English
            </button>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

<style>
  .required abbr {
    color: red;
    text-decoration: none;
  }
</style>